{% extends 'main/nav.html' %}
{% load crispy_forms_tags %}
{% block DashBoard %}
<div class="card-header py-3">
    <h5 class="mb-0 text-center"><strong>Health check history</strong></h5>
</div>
<div class="container">
    <br>
    <table class="table align-middle mb-0 bg-white">
        <thead class="bg-light">
            <tr>
                {% for attribute in attributes %}
                <th>{{ attribute.name }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            <!-- for each history print each attributes values -->
            {% if histories %}
            {% for history in histories %}
            <a href="">
                <tr onclick="window.location='/history/{{history.id}}';">
                    <td>{{ history.age }}</td>
                    <td>{{ history.get_sex_display }}</td>
                    <td>{{ history.get_cp_display }}</td>
                    <td>{{ history.trestbps }}</td>
                    <td>{{ history.chol }}</td>
                    <td>{{ history.get_fbs_display }}</td>
                    <td>{{ history.get_restecg_display }}</td>
                    <td>{{ history.thalach }}</td>
                    <td>{{ history.get_exang_display }}</td>
                    <td>{{ history.oldpeak }}</td>
                    <td>{{ history.get_slope_display }}</td>
                    <td>{{ history.ca }}</td>
                    <td>{{ history.get_thal_display }}</td>
                    <td>{{ history.get_target_display }}</td>
                    <td>{{ history.pos }}%</td>
                    <td>{{ history.createdAt|date:"d/m/Y" }}</td>
                </tr>
            </a>


            {% endfor %}

            {% else %}
            <tr>
                <td colspan="12">No data</td>
            </tr>
            {% endif %}


        </tbody>
    </table>
</div>
<script>jQuery(document).ready(function ($) {
        $(".clickable-row").click(function () {
            window.location = $(this).data("href");
        });
    });
</script>

{% endblock %}